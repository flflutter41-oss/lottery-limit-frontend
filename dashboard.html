<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dashboard - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏´‡∏ß‡∏¢</title>
    <link rel="stylesheet" href="styles.css">
    <script src="config.js"></script>
</head>
<body>
    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>

    <nav class="navbar">
        <div class="nav-brand">üé∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏´‡∏ß‡∏¢</div>
        <button class="menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
        <ul class="nav-menu">
            <li><a href="dashboard.html" class="active">Dashboard</a></li>
            <li><a href="limit-2digit.html">‡∏•‡∏¥‡∏°‡∏¥‡∏ï 2 ‡∏ï‡∏±‡∏ß</a></li>
            <li><a href="limit-3digit.html">‡∏•‡∏¥‡∏°‡∏¥‡∏ï 3 ‡∏ï‡∏±‡∏ß</a></li>
            <li><a href="settings.html">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a></li>
            <li class="hide-desktop"><a href="#" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
        </ul>
        <div class="nav-user">
            <span id="currentUser"></span>
            <button class="btn btn-sm btn-danger" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å</button>
        </div>
    </nav>

    <main class="main-content">
        <div class="page-header">
            <h1>Dashboard</h1>
            <p>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏á‡∏ß‡∏î 
                <select id="periodSelect" onchange="loadDashboard()" style="padding: 5px 10px; border-radius: 6px; border: 1px solid #ddd;">
                </select>
            </p>
        </div>

        <!-- Summary Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-info">
                    <h3>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° 2 ‡∏ï‡∏±‡∏ß</h3>
                    <p class="stat-value" id="total2Digit">0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìà</div>
                <div class="stat-info">
                    <h3>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î</h3>
                    <p class="stat-value" id="total3DigitTode">0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìâ</div>
                <div class="stat-info">
                    <h3>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° 3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏ï‡πá‡∏á</h3>
                    <p class="stat-value" id="total3DigitTeng">0</p>
                </div>
            </div>
            <div class="stat-card warning">
                <div class="stat-icon">‚ö†Ô∏è</div>
                <div class="stat-info">
                    <h3>‡πÄ‡∏•‡∏Ç‡πÉ‡∏Å‡∏•‡πâ‡∏•‡∏¥‡∏°‡∏¥‡∏ï</h3>
                    <p class="stat-value" id="nearLimitCount">0</p>
                </div>
            </div>
        </div>

        <!-- Alerts Section -->
        <div class="alerts-section">
            <div class="section-header">
                <h2>‚ö†Ô∏è ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏•‡∏Ç‡πÉ‡∏Å‡∏•‡πâ‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‚â•80%)</h2>
            </div>
            <div class="alerts-container" id="alertsContainer">
                <p class="no-alerts">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏•‡∏¥‡∏°‡∏¥‡∏ï</p>
            </div>
        </div>

        <!-- Quick Add Section -->
        <div class="quick-add-section">
            <div class="section-header">
                <h2>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏î‡πà‡∏ß‡∏ô</h2>
            </div>
            <div class="quick-add-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                        <select id="quickType">
                            <option value="2digit">2 ‡∏ï‡∏±‡∏ß</option>
                            <option value="3digit-tode">3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î</option>
                            <option value="3digit-teng">3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏ï‡πá‡∏á</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡πÄ‡∏•‡∏Ç</label>
                        <input type="text" id="quickNumber" placeholder="‡πÄ‡∏ä‡πà‡∏ô 94 ‡∏´‡∏£‡∏∑‡∏≠ 123">
                    </div>
                    <div class="form-group">
                        <label>‡∏¢‡∏≠‡∏î (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="quickAmount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
                    </div>
                    <button class="btn btn-success" onclick="quickAdd()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î</button>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="recent-section">
            <div class="section-header">
                <h2>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏ß‡∏î‡∏ô‡∏µ‡πâ</h2>
                <button class="btn btn-sm btn-outline" onclick="showAllTransactions()">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                            <th>‡πÄ‡∏•‡∏Ç</th>
                            <th>‡∏¢‡∏≠‡∏î/‡∏•‡∏¥‡∏°‡∏¥‡∏ï</th>
                        </tr>
                    </thead>
                    <tbody id="recentTransactions">
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script src="db.js"></script>
    <script src="app.js"></script>
    <script>
        checkAuth();
        document.getElementById('currentUser').textContent = getCurrentUser();
        initPeriodSelector();
        
        // Load dashboard on page ready
        document.addEventListener('DOMContentLoaded', async function() {
            await loadDashboard();
        });
    </script>
</body>
</html>

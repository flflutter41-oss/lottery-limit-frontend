<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏•‡∏¥‡∏°‡∏¥‡∏ï 3 ‡∏ï‡∏±‡∏ß - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏´‡∏ß‡∏¢</title>
    <link rel="stylesheet" href="styles.css">
    <script src="config.js"></script>
</head>
<body>
    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>

    <nav class="navbar">
        <div class="nav-brand">üé∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏´‡∏ß‡∏¢</div>
        <button class="menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
        <ul class="nav-menu">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="limit-2digit.html">‡∏•‡∏¥‡∏°‡∏¥‡∏ï 2 ‡∏ï‡∏±‡∏ß</a></li>
            <li><a href="limit-3digit.html" class="active">‡∏•‡∏¥‡∏°‡∏¥‡∏ï 3 ‡∏ï‡∏±‡∏ß</a></li>
            <li><a href="settings.html">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a></li>
            <li class="hide-desktop"><a href="#" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
        </ul>
        <div class="nav-user">
            <span id="currentUser"></span>
            <button class="btn btn-sm btn-danger" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å</button>
        </div>
    </nav>

    <main class="main-content">
        <div class="page-header">
            <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏¥‡∏°‡∏¥‡∏ï 3 ‡∏ï‡∏±‡∏ß</h1>
            <p>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß (‡πÇ‡∏ï‡πä‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡πá‡∏á)</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="tode" onclick="switchTab('tode')">3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î</button>
            <button class="tab-btn" data-tab="teng" onclick="switchTab('teng')">3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏ï‡πá‡∏á</button>
        </div>

        <!-- Tode Tab Content -->
        <div class="tab-content active" id="tab-tode">
            <!-- Set Default Limit -->
            <div class="card">
                <div class="card-header">
                    <h3>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÇ‡∏ï‡πä‡∏î)</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="defaultLimitTode" value="3000">
                        </div>
                        <button class="btn btn-primary" onclick="setDefaultTodeLimit()">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        <button class="btn btn-warning" onclick="resetAllTodeAmounts()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    </div>
                </div>
            </div>

            <!-- Add Amount Form -->
            <div class="card">
                <div class="card-header">
                    <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö (‡πÇ‡∏ï‡πä‡∏î)</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß</label>
                            <input type="text" id="numberTode" placeholder="000-999" maxlength="3">
                        </div>
                        <div class="form-group">
                            <label>‡∏¢‡∏≠‡∏î (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="amountTode" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
                        </div>
                        <button class="btn btn-success" onclick="addTodeAmount()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î</button>
                    </div>
                </div>
            </div>

            <!-- Set Individual Limit -->
            <div class="card">
                <div class="card-header">
                    <h3>üéØ ‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß (‡πÇ‡∏ï‡πä‡∏î)</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß</label>
                            <input type="text" id="limitNumberTode" placeholder="000-999" maxlength="3">
                        </div>
                        <div class="form-group">
                            <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="limitValueTode" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏¥‡∏°‡∏¥‡∏ï">
                        </div>
                        <button class="btn btn-primary" onclick="setTodeLimit()">‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï</button>
                    </div>
                </div>
            </div>

            <!-- Filter -->
            <div class="card">
                <div class="card-header">
                    <h3>üîç ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç</label>
                            <input type="text" id="searchTode" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." oninput="filterTodeTable()">
                        </div>
                        <div class="form-group">
                            <label>‡πÅ‡∏™‡∏î‡∏á</label>
                            <select id="filterTode" onchange="filterTodeTable()">
                                <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                <option value="has-amount">‡∏°‡∏µ‡∏¢‡∏≠‡∏î</option>
                                <option value="near-limit">‡πÉ‡∏Å‡∏•‡πâ‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‚â•80%)</option>
                                <option value="over-limit">‡πÄ‡∏Å‡∏¥‡∏ô‡∏•‡∏¥‡∏°‡∏¥‡∏ï</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Numbers Table -->
            <div class="card">
                <div class="card-header">
                    <h3>üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î</h3>
                    <span class="badge">‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î</span>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="data-table" id="tableTode">
                            <thead>
                                <tr>
                                    <th>‡πÄ‡∏•‡∏Ç</th>
                                    <th>‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö</th>
                                    <th>‡∏•‡∏¥‡∏°‡∏¥‡∏ï</th>
                                    <th>%</th>
                                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyTode">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teng Tab Content -->
        <div class="tab-content" id="tab-teng">
            <!-- Set Default Limit -->
            <div class="card">
                <div class="card-header">
                    <h3>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÄ‡∏ï‡πá‡∏á)</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="defaultLimitTeng" value="2000">
                        </div>
                        <button class="btn btn-primary" onclick="setDefaultTengLimit()">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        <button class="btn btn-warning" onclick="resetAllTengAmounts()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    </div>
                </div>
            </div>

            <!-- Add Amount Form -->
            <div class="card">
                <div class="card-header">
                    <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö (‡πÄ‡∏ï‡πá‡∏á)</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß</label>
                            <input type="text" id="numberTeng" placeholder="000-999" maxlength="3">
                        </div>
                        <div class="form-group">
                            <label>‡∏¢‡∏≠‡∏î (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="amountTeng" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
                        </div>
                        <button class="btn btn-success" onclick="addTengAmount()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î</button>
                    </div>
                </div>
            </div>

            <!-- Set Individual Limit -->
            <div class="card">
                <div class="card-header">
                    <h3>üéØ ‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß (‡πÄ‡∏ï‡πá‡∏á)</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß</label>
                            <input type="text" id="limitNumberTeng" placeholder="000-999" maxlength="3">
                        </div>
                        <div class="form-group">
                            <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="limitValueTeng" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏¥‡∏°‡∏¥‡∏ï">
                        </div>
                        <button class="btn btn-primary" onclick="setTengLimit()">‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï</button>
                    </div>
                </div>
            </div>

            <!-- Filter -->
            <div class="card">
                <div class="card-header">
                    <h3>üîç ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç</label>
                            <input type="text" id="searchTeng" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." oninput="filterTengTable()">
                        </div>
                        <div class="form-group">
                            <label>‡πÅ‡∏™‡∏î‡∏á</label>
                            <select id="filterTeng" onchange="filterTengTable()">
                                <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                <option value="has-amount">‡∏°‡∏µ‡∏¢‡∏≠‡∏î</option>
                                <option value="near-limit">‡πÉ‡∏Å‡∏•‡πâ‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‚â•80%)</option>
                                <option value="over-limit">‡πÄ‡∏Å‡∏¥‡∏ô‡∏•‡∏¥‡∏°‡∏¥‡∏ï</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Numbers Table -->
            <div class="card">
                <div class="card-header">
                    <h3>üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏ï‡πá‡∏á</h3>
                    <span class="badge">‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î</span>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="data-table" id="tableTeng">
                            <thead>
                                <tr>
                                    <th>‡πÄ‡∏•‡∏Ç</th>
                                    <th>‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö</th>
                                    <th>‡∏•‡∏¥‡∏°‡∏¥‡∏ï</th>
                                    <th>%</th>
                                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyTeng">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Edit Modal -->
    <div class="modal" id="editModal3">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏•‡∏Ç <span id="editNumber3"></span> (<span id="editType3"></span>)</h3>
                <button class="modal-close" onclick="closeModal3()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                    <input type="number" id="editAmount3" readonly>
                </div>
                <div class="form-group">
                    <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï</label>
                    <input type="number" id="editLimit3">
                </div>
                <div class="form-group">
                    <label>‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡πÉ‡∏´‡∏°‡πà</label>
                    <input type="number" id="editNewAmount3" placeholder="‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal3()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-primary" onclick="saveEdit3()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <script src="db.js"></script>
    <script src="app.js"></script>
    <script>
        checkAuth();
        document.getElementById('currentUser').textContent = getCurrentUser();
        
        document.addEventListener('DOMContentLoaded', async function() {
            await load3DigitTables();
        });
    </script>
</body>
</html>

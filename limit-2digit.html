<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏•‡∏¥‡∏°‡∏¥‡∏ï 2 ‡∏ï‡∏±‡∏ß - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏´‡∏ß‡∏¢</title>
    <link rel="stylesheet" href="styles.css">
    <script src="config.js"></script>
</head>
<body>
    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>

    <nav class="navbar">
        <div class="nav-brand">üé∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏´‡∏ß‡∏¢</div>
        <button class="menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
        <ul class="nav-menu">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="limit-2digit.html" class="active">‡∏•‡∏¥‡∏°‡∏¥‡∏ï 2 ‡∏ï‡∏±‡∏ß</a></li>
            <li><a href="limit-3digit.html">‡∏•‡∏¥‡∏°‡∏¥‡∏ï 3 ‡∏ï‡∏±‡∏ß</a></li>
            <li><a href="settings.html">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a></li>
            <li class="hide-desktop"><a href="#" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
        </ul>
        <div class="nav-user">
            <span id="currentUser"></span>
            <button class="btn btn-sm btn-danger" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å</button>
        </div>
    </nav>

    <main class="main-content">
        <div class="page-header">
            <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏¥‡∏°‡∏¥‡∏ï 2 ‡∏ï‡∏±‡∏ß (00-99)</h1>
            <p>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß</p>
        </div>

        <!-- Set Default Limit -->
        <div class="card">
            <div class="card-header">
                <h3>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</h3>
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="defaultLimit2Digit" value="5000">
                    </div>
                    <button class="btn btn-primary" onclick="setDefault2DigitLimit()">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    <button class="btn btn-warning" onclick="resetAll2DigitAmounts()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                </div>
            </div>
        </div>

        <!-- Add Amount Form -->
        <div class="card">
            <div class="card-header">
                <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö</h3>
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß</label>
                        <input type="text" id="number2Digit" placeholder="00-99" maxlength="2">
                    </div>
                    <div class="form-group">
                        <label>‡∏¢‡∏≠‡∏î (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="amount2Digit" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
                    </div>
                    <button class="btn btn-success" onclick="add2DigitAmount()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î</button>
                </div>
            </div>
        </div>

        <!-- Set Individual Limit -->
        <div class="card">
            <div class="card-header">
                <h3>üéØ ‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß</h3>
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß</label>
                        <input type="text" id="limitNumber2Digit" placeholder="00-99" maxlength="2">
                    </div>
                    <div class="form-group">
                        <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="limitValue2Digit" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏¥‡∏°‡∏¥‡∏ï">
                    </div>
                    <button class="btn btn-primary" onclick="set2DigitLimit()">‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï</button>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="card">
            <div class="card-header">
                <h3>üîç ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç</label>
                        <input type="text" id="search2Digit" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." oninput="filter2DigitTable()">
                    </div>
                    <div class="form-group">
                        <label>‡πÅ‡∏™‡∏î‡∏á</label>
                        <select id="filter2Digit" onchange="filter2DigitTable()">
                            <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            <option value="has-amount">‡∏°‡∏µ‡∏¢‡∏≠‡∏î</option>
                            <option value="near-limit">‡πÉ‡∏Å‡∏•‡πâ‡∏•‡∏¥‡∏°‡∏¥‡∏ï (‚â•80%)</option>
                            <option value="over-limit">‡πÄ‡∏Å‡∏¥‡∏ô‡∏•‡∏¥‡∏°‡∏¥‡∏ï</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Numbers Table -->
        <div class="card">
            <div class="card-header">
                <h3>üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 2 ‡∏ï‡∏±‡∏ß (00-99)</h3>
            </div>
            <div class="card-body">
                <div class="table-container">
                    <table class="data-table" id="table2Digit">
                        <thead>
                            <tr>
                                <th>‡πÄ‡∏•‡∏Ç</th>
                                <th>‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö</th>
                                <th>‡∏•‡∏¥‡∏°‡∏¥‡∏ï</th>
                                <th>%</th>
                                <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody id="tbody2Digit">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏•‡∏Ç <span id="editNumber"></span></h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                    <input type="number" id="editAmount" readonly>
                </div>
                <div class="form-group">
                    <label>‡∏•‡∏¥‡∏°‡∏¥‡∏ï</label>
                    <input type="number" id="editLimit">
                </div>
                <div class="form-group">
                    <label>‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡πÉ‡∏´‡∏°‡πà</label>
                    <input type="number" id="editNewAmount" placeholder="‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-primary" onclick="saveEdit()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <script src="db.js"></script>
    <script src="app.js"></script>
    <script>
        checkAuth();
        document.getElementById('currentUser').textContent = getCurrentUser();
        
        document.addEventListener('DOMContentLoaded', async function() {
            await load2DigitTable();
        });
    </script>
</body>
</html>
